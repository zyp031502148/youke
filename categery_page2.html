<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="css/style1.css">
	<link rel="stylesheet" type="text/css" href="css/ceping.css">
	
</head>
<body>
	<div class="headertop">
		<div class="headercenter">
			<div class="headerlogo"><a href="/"><img src="images/LOGO-1.png"></a></div>
			<div class="headermanue">
				<ul>
					<li><a href="index.html"><span>首页</span><div>Home</div></a></li>
					<li><a href="cepin.html"><span>测评</span><div>Tests</div></a></li>
					<li><a href="news.html"><span>资讯</span><div>News</div></a></li>
				</ul>
			</div>
			<div class="headermanue2">
				<a href="#">
					<span>分类<img src="images/Combined Shape.png"></span>
					<div>Categories</div>
				</a>
				<div class="categery">
					<ul>
					  <li><a href="categery_page2.html" title="母婴亲子">母婴亲子</a></li>
					  <li><a href="categery_page2.html" title="美容时尚">美容时尚</a></li>
					  <li><a href="categery_page2.html" title="食品饮料">食品饮料</a></li>
					  <li><a href="categery_page2.html" title="居家其他">居家其他</a></li>
					  <li><a href="categery_page2.html" >品牌墙</a></li>
					</ul>
				</div>
			</div>
			<div class="headerleft">
				<div class="searchbox" id="searchbox">
					<form action="" class="parent">
						<input type="text" id="keyword" name="searc" placeholder="搜索商品，测评或者资讯文章">
						<i id="searchbtn" > </i>
					</form>	
				</div>
				<div class="sign-regist">
					<a href="login1.html">
						<span>登录</span>
						<div>Sign In</div>
					</a>
					<a href="regist.html">
						<span>注册</span>
						<div>Register</div>
					</a>
				</div>
			</div>
		</div>
	</div>
	<!-- header end -->
	<div class="ceping">
		<div class="ceping-title">美容时尚</div>
		<div class="ceping-body">
			<div class="ceping_body_title">
				<ul class="ceping_body_head">
					<li class="list_on" id="all">全部</li>
					<li id="facial_clearn"><a>面部洗护</a></li>
					<li id="cosmetics"><a>香氛彩妆</a></li>
					<li id="shampoo"><a>美发护发</a></li>
					<li id="soap"><a>身体洗护</a></li>
					<li id="mouth_water"><a>叩腔处理</a></li>
					<li id="facial_clearn_man"><a>男士洗护</a></li>
					<li id="close"><a>服饰</a></li>
				</ul>
			</div>
			<div>
				<div class="ceping-contents categery_content">
				</div>
				<div class="page">
					<ul id="tab_t">
						<li class="pre-page" style="display: none"><a href="#"><img class="prePage" src="images/left2.png"></a></li>
						<li class="act" id="pagelink">1</li>
						<li class="sl">...</li>
						<li id="pagelink" class="lastPage"></li>
						<li class="next-page"><a href="#"><img class="nextPage" src="images/right2.png"></a></li>
					</ul>
					<div class="pgbtn">
						<span>跳转到</span>
						<input type="text" name="" id="jumpPage">
						<input id="OK" type="button" name="" value="确定">
					</div>	
				</div>
			</div>
			
		</div>	
	</div>
	<div class="footer">
		<div class="footer-con">
			<div class="foot-content-left">
				<div class="foot-contents">
					<div class="foot-content">
						<a href="">
							<span>关于优恪</span>
							<p class="foot-eng">About OKOer</p>
						</a>
						<span class="icon">|</span>
					</div>
					<div class="foot-content">
						<a href="">
							<span>优恪协议</span>
							<p class="foot-eng">Terms</p>
						</a>
						<span class="icon">|</span>
					</div>
					<div class="foot-content">
						<a href="">
							<span>帮助中心</span>
							<p class="foot-eng">Help</p>
						</a>
						<span class="icon">|</span>
					</div>
					<div class="foot-content">
						<a href="">
							<span>加入优恪</span>
							<p class="foot-eng">Join us</p>
						</a>
						<span class="icon">|</span>
					</div>
					<div class="foot-content">
						<a href="">
							<span>联系我们</span>
							<p class="foot-eng">Contact</p>
						</a>
						<span class="icon">|</span>
					</div>
					<div class="foot-content">
						<a href="">
							<span>投稿须知</span>
							<p class="foot-eng">Contribute</p>
						</a>
						<span class="icon">|</span>
					</div>
				</div>
				<div class="foot-contents2">
					<p>电话 010-85236266   ·   邮箱 contact@okoer.com   ·   违法与不良信息举报 010-85236266 转302   ·   公司地址 北京市朝阳区工体北路4号机电大院81楼4层</p>
				</div>
				<div class="foot-contents3">
					<p>
						<a href="#">京ICP备 14058988 号-2  ·</a>
						<a href="#">  京ICP证150533号  ·</a>
						<a href="#">  经营证照  ·</a>
						<span>  Copyright ©2015-2016 OKOer Inc. All Rights Reserved.</span>
					</p>
				</div>
		</div>
		<div class="foot-right">
			<a href="#"><img src="images/weixin.png"></a>
			<a href="#"><img src="images/sina.png"></a>
			<a href="#"><img src="images/app.png"></a>
		</div>
	 </div>
	</div>
<script type="text/javascript" src="js/app.js"></script>
<script type="text/javascript" src="utlis/ajax.js"></script>
<script type="text/javascript" src="js/renderPage.js"></script>
<script type="text/javascript">
	function createProductList(date){
		var cepingContents = document.querySelector('.ceping-contents');
		cepingContents.innerHTML = '';
		for(var i=0; i<date.listSize;i++){
			var itemDiv = document.createElement('div');
			var itemA = document.createElement('a');
			itemDiv.appendChild(itemA);
			var div = ('<div>'
										+'<img src="'+date.list[i].goodsImg+'" class="goodsimg">'
										+'<img src="../images/a+.png" class="evaluate">'
								+'</div>'
							   +'<div class="txt">'
								    +'<p>'+date.list[i].goodsName+'</p>'
								    +'<span>'+date.list[i].likeNumber+'</span>'
								    +'<div class="hid"><img src="images/icon_cart.png"></div>'
								  +'</div>');
			
			itemA.href = 'products_buy.html';
			itemA.innerHTML = div;
			console.log(itemA);
			itemDiv.classList.add('reduction');
			cepingContents.appendChild(itemDiv);
		}

	}
var page = document.querySelector(".page").children[0].children;
function linkAjax(idName){
	var option ={
		type:'GET',
		url:'../api/products_list.json',
		async : true,
		date:{
			id:idName
		},
		success:function(res){
			res = JSON.parse(res);
			var data = res.data;
			var lastPage = document.querySelector('.lastPage');
			lastPage.innerHTML = Math.ceil(data.total/20);
			createProductList(data);
			createPage(parseInt(lastPage.innerHTML));
			/*if(data.currentPage == 1){
				createPage(parseInt(lastPage.innerHTML));
			}*/
			
		}
	}
	ajax(option);
}
	linkAjax(all);
	/*var lastPage = document.querySelector('.lastPage');
	createPage(parseInt(lastPage.innerHTML));*/
	var listHead = document.querySelector('.ceping_body_head');
	listHead.onclick = function(){
		var cepingContents = document.querySelector('.ceping-contents')
		var currentItem = document.querySelector('.list_on');
		var item = event.target;
		if(item.nodeName=='A'){
			item = item.parentNode;
		}
		item.classList.add('list_on');
		currentItem.classList.remove('list_on');
		cepingContents.innerHTML = "";
		linkAjax(item.id);
	}
	var pageParent = document.querySelector(".page").children[0];
	var prePage = document.querySelector(".pre-page");
	var nextPage = document.querySelector(".next-page");
	var lastPage = document.querySelector('.lastPage');
	var ok = document.querySelector('#OK');
	var jumpPage = document.querySelector('#jumpPage');
	pageParent.onclick = function(){
		var item = event.target;
		var jPageNum = parseInt(item.innerHTML);
		var totalPage = parseInt(lastPage.innerHTML);
		jump(jPageNum,totalPage,item);
	}
	prePage.onclick = function(){
		var itemIndex = document.querySelector(".act").innerHTML-1;
		var totalPage = parseInt(lastPage.innerHTML);
		jump(itemIndex,totalPage,page[itemIndex]);
	}
	nextPage.onclick = function(){
		var itemIndex = parseInt(document.querySelector(".act").innerHTML)+1;
		var totalPage = parseInt(lastPage.innerHTML);
		if(itemIndex==totalPage){
			itemIndex++;
		}
		jump(itemIndex,totalPage,page[itemIndex]);
	}
	ok.onclick = function(){
		var itemIndex = parseInt(jumpPage.value);
		var totalPage = parseInt(lastPage.innerHTML);
		if(itemIndex<=totalPage&&itemIndex>3){
			if(itemIndex==totalPage){
				itemIndex++;
			}
			jump(itemIndex,totalPage,page[itemIndex]);
			jumpPage.value='';
		}else if(itemIndex<=totalPage&&itemIndex<=3&&totalPage>3){
			for(var i=itemIndex+2; i<totalPage;i++){
				page[i].style.display = 'none';
			}
			pageSl(1);
			page[1].style.display = 'block';
			page[2].style.display = 'block';
			page[3].style.display = 'block';
			pageOnlyChange(page[itemIndex]);
		}else{
			alert("已超出页数！");
		}
	}
</script>
</body>
</html>